import{D as e,B as l,b as a,G as d,r as t,o,e as i,f as n,g as r,w as s,F as u,l as m,c as f,i as c,t as p,H as b,E as g,p as V,j as k}from"./vendor.b59db1c2.js";import{W as _}from"./wangEditor.11cdd363.js";import{d as v}from"./index.58c84962.js";import{_ as D}from"./index.c0942d2f.js";const y={name:"productAdd",setup(){const t=e(null),o=e(null),i=e(""),n=e(!1),r=l({title:"",address:"",region:"",beginDate:"",endDate:"",amount:0,describe:"",cover:"",link:[]});let s;a((()=>{s=new _(t.value),s.config.zIndex=1,s.create()})),d((()=>{s.destroy(),s=null}));return{addVaule:i,addVisible:n,showAddLink:()=>{n.value=!0},addLinkConfirm:()=>{r.link.push(i.value),i.value="",n.value=!1},addLinkColse:e=>{r.link.splice(r.link.indexOf(e),1)},editor:t,rules:{title:[{required:!0,message:"请输入活动名称",trigger:"blur"}],address:[{required:!0,message:"请输入活动地址",trigger:"blur"}],beginDate:[{required:!0,message:"请输入开始时间",trigger:"blur"}],endDate:[{required:!0,message:"请输入结束时间",trigger:"blur"}]},formRef:o,form:r,onSubmit:()=>{r.describe=s.txt.html(),o.value.validate((e=>{if(!e)return!1;v({title:r.title,address:r.address,startTime:`${r.beginDate}`,endTime:`${r.endDate}`,describe:r.describe,link:r.link,amount:r.amount,cover:r.cover}).then((e=>{console.log(e)})),g.success("提交成功！")}))},onReset:()=>{o.value.resetFields()}}}},C={class:"crumbs"},h=(e=>(V("data-v-639afb42"),e=e(),k(),e))((()=>n("i",{class:"el-icon-lx-calendar"},null,-1))),w=c(" 活动 "),x=c("新增"),z={class:"container"},U={class:"form-box"},L=c("+ 新增活动环节"),j={class:"mgb20",ref:"editor"},q=c("保存"),R=c("重置");var A=D(y,[["render",function(e,l,a,d,g,V){const k=t("el-breadcrumb-item"),_=t("el-breadcrumb"),v=t("el-input"),D=t("el-form-item"),y=t("el-input-number"),A=t("el-tag"),E=t("el-button"),F=t("el-date-picker"),I=t("el-col"),K=t("el-form");return o(),i("div",null,[n("div",C,[r(_,{separator:"/"},{default:s((()=>[r(k,null,{default:s((()=>[h,w])),_:1}),r(k,null,{default:s((()=>[x])),_:1})])),_:1})]),n("div",z,[n("div",U,[r(K,{ref:"formRef",rules:d.rules,model:d.form,"label-width":"80px"},{default:s((()=>[r(D,{label:"活动名称",prop:"title"},{default:s((()=>[r(v,{size:"mini",modelValue:d.form.title,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.title=e)},null,8,["modelValue"])])),_:1}),r(D,{label:"活动地址",prop:"address"},{default:s((()=>[r(v,{size:"mini",modelValue:d.form.address,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.address=e)},null,8,["modelValue"])])),_:1}),r(D,{label:"活动封面",prop:"cover"},{default:s((()=>[r(v,{size:"mini",modelValue:d.form.cover,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.cover=e),placeholder:"请输入封面图片网络地址"},null,8,["modelValue"])])),_:1}),r(D,{label:"费用(元)",prop:"amount"},{default:s((()=>[r(y,{size:"mini",modelValue:d.form.amount,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.amount=e),min:1},null,8,["modelValue"])])),_:1}),r(D,{label:"活动环节",prop:"link"},{default:s((()=>[(o(!0),i(u,null,m(d.form.link,(e=>(o(),f(A,{key:e,closable:"","disable-transitions":!1,onClose:l=>d.addLinkColse(e)},{default:s((()=>[c(p(e),1)])),_:2},1032,["onClose"])))),128)),d.addVisible?(o(),f(v,{key:0,modelValue:d.addVaule,"onUpdate:modelValue":l[4]||(l[4]=e=>d.addVaule=e),class:"input-new-tag",size:"mini",onKeyup:b(d.addLinkConfirm,["enter"])},null,8,["modelValue","onKeyup"])):(o(),f(E,{key:1,class:"button-new-tag",size:"small",onClick:d.showAddLink},{default:s((()=>[L])),_:1},8,["onClick"]))])),_:1}),r(D,{label:"开始时间"},{default:s((()=>[r(I,{span:11},{default:s((()=>[r(D,{prop:"beginDate"},{default:s((()=>[r(F,{size:"mini",type:"datetime",placeholder:"选择日期",modelValue:d.form.beginDate,"onUpdate:modelValue":l[5]||(l[5]=e=>d.form.beginDate=e),style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(D,{label:"结束时间"},{default:s((()=>[r(I,{span:11},{default:s((()=>[r(D,{prop:"endDate"},{default:s((()=>[r(F,{size:"mini",type:"datetime",placeholder:"选择日期",modelValue:d.form.endDate,"onUpdate:modelValue":l[6]||(l[6]=e=>d.form.endDate=e),style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),r(D,{label:"活动描述"},{default:s((()=>[n("div",j,null,512)])),_:1}),r(D,null,{default:s((()=>[r(E,{type:"primary",onClick:d.onSubmit},{default:s((()=>[q])),_:1},8,["onClick"]),r(E,{onClick:d.onReset},{default:s((()=>[R])),_:1},8,["onClick"])])),_:1})])),_:1},8,["rules","model"])])])])}],["__scopeId","data-v-639afb42"]]);export{A as default};
