import{d as e,B as a,D as l,r as t,o as d,e as o,f as i,g as n,w as s,L as r,E as c,p,j as u,i as m}from"./vendor.b59db1c2.js";import{b,c as f}from"./index.c355317d.js";import{_ as g}from"./index.b56b8fd1.js";const h={name:"userstable",setup(){const t=e(),d=a({address:"",openId:"",pageIndex:1,pageSize:10}),o=l([]),i=l(0),n=()=>{b({limit:d.pageSize,offset:d.pageSize*(d.pageIndex-1)}).then((e=>{o.value=e.data.activityList,i.value=e.data.total}))};n();const s=l(!1);let p=a({name:"",address:""});return{query:d,tableData:o,pageTotal:i,editVisible:s,form:p,handleAdd:()=>{t.push("/productAdd")},handlePageChange:e=>{d.pageIndex=e,n()},handleDelete:(e,a)=>{r.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{f({activityId:a.id}).then((a=>{0==a.errno?(c.success("删除成功"),o.value.splice(e,1)):c.success("删除失败")}))})).catch((()=>{}))},handleEdit:(e,a)=>{t.push({path:"/productAdd",query:{activityId:a.id}})},saveEdit:()=>{s.value=!1,c.success("修改第 0 行成功"),Object.keys(p).forEach((e=>{o.value[-1][e]=p[e]}))}}}},v={class:"crumbs"},y=(e=>(p("data-v-94e4ce16"),e=e(),u(),e))((()=>i("i",{class:"el-icon-lx-cascades"},null,-1))),C=m(" 用户列表 "),x={class:"container"},_={class:"handle-box"},k=m("新增活动"),V=m("编辑 "),w=m("复制 "),I=m("删除"),z={class:"pagination"},E={class:"dialog-footer"},j=m("取 消"),D=m("确 定");var T=g(h,[["render",function(e,a,l,r,c,p){const u=t("el-breadcrumb-item"),m=t("el-breadcrumb"),b=t("el-button"),f=t("el-table-column"),g=t("el-table"),h=t("el-pagination"),T=t("el-input"),q=t("el-form-item"),A=t("el-form"),S=t("el-dialog");return d(),o("div",null,[i("div",v,[n(m,{separator:"/"},{default:s((()=>[n(u,null,{default:s((()=>[y,C])),_:1})])),_:1})]),i("div",x,[i("div",_,[n(b,{type:"primary",icon:"el-icon-circle-plus-outline",onClick:r.handleAdd},{default:s((()=>[k])),_:1},8,["onClick"])]),n(g,{data:r.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:s((()=>[n(f,{prop:"id",label:"活动id",align:"center"}),n(f,{prop:"title",label:"活动标题"}),n(f,{prop:"amount",label:"活动金额"}),n(f,{"show-overflow-tooltip":"",prop:"describe",label:"活动描述"}),n(f,{prop:"link",label:"活动环节"}),n(f,{prop:"address",label:"地址"}),n(f,{prop:"startTime",label:"活动开始时间"}),n(f,{prop:"startTime",label:"活动结束时间"}),n(f,{label:"操作",width:"180",align:"center"},{default:s((a=>[n(b,{type:"text",icon:"el-icon-edit",onClick:e=>r.handleEdit(a.$index,a.row)},{default:s((()=>[V])),_:2},1032,["onClick"]),n(b,{type:"text",icon:"el-icon-edit",onClick:l=>e.handleCopy(a.$index,a.row)},{default:s((()=>[w])),_:2},1032,["onClick"]),n(b,{type:"text",icon:"el-icon-delete",class:"red",onClick:e=>r.handleDelete(a.$index,a.row)},{default:s((()=>[I])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),i("div",z,[n(h,{background:"",layout:"total, prev, pager, next","current-page":r.query.pageIndex,"page-size":r.query.pageSize,total:r.pageTotal,onCurrentChange:r.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),n(S,{title:"编辑",modelValue:r.editVisible,"onUpdate:modelValue":a[3]||(a[3]=e=>r.editVisible=e),width:"30%"},{footer:s((()=>[i("span",E,[n(b,{onClick:a[2]||(a[2]=e=>r.editVisible=!1)},{default:s((()=>[j])),_:1}),n(b,{type:"primary",onClick:r.saveEdit},{default:s((()=>[D])),_:1},8,["onClick"])])])),default:s((()=>[n(A,{"label-width":"70px"},{default:s((()=>[n(q,{label:"用户名"},{default:s((()=>[n(T,{modelValue:r.form.name,"onUpdate:modelValue":a[0]||(a[0]=e=>r.form.name=e)},null,8,["modelValue"])])),_:1}),n(q,{label:"地址"},{default:s((()=>[n(T,{modelValue:r.form.address,"onUpdate:modelValue":a[1]||(a[1]=e=>r.form.address=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}],["__scopeId","data-v-94e4ce16"]]);export{T as default};
