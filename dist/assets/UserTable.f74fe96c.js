import{z as e,B as a,r as l,o as t,e as d,f as o,g as n,w as r,i,L as s,C as p}from"./vendor.a6d9e6a0.js";import{g as u}from"./index.9f67f35d.js";import{_ as c}from"./index.c00c347b.js";const m={class:"crumbs"},b={class:"container"},f={class:"handle-box"},g={class:"pagination"},h={class:"dialog-footer"};var v=c({name:"userstable",setup(){const l=e({address:"",openId:"",pageIndex:1,pageSize:10}),t=a([]),d=a(0),o=()=>{u({limit:l.pageSize,offset:l.pageSize*(l.pageIndex-1),openId:l.openId?l.openId:""}).then((e=>{t.value=e.data.userList,d.value=e.data.total}))};o();const n=a(!1);let r=e({name:"",address:""}),i=-1;return{query:l,tableData:t,pageTotal:d,editVisible:n,form:r,handleSearch:()=>{l.pageIndex=1,o()},handlePageChange:e=>{l.pageIndex=e,o()},handleDelete:e=>{s.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{p.success("删除成功"),t.value.splice(e,1)})).catch((()=>{}))},handleEdit:(e,a)=>{i=e,Object.keys(r).forEach((e=>{r[e]=a[e]})),n.value=!0},saveEdit:()=>{n.value=!1,p.success(`修改第 ${i+1} 行成功`),Object.keys(r).forEach((e=>{t.value[i][e]=r[e]}))}}}},[["render",function(e,a,s,p,u,c){const v=l("el-breadcrumb-item"),x=l("el-breadcrumb"),y=l("el-input"),C=l("el-button"),V=l("el-table-column"),_=l("el-table"),I=l("el-pagination"),k=l("el-form-item"),w=l("el-form"),z=l("el-dialog");return t(),d("div",null,[o("div",m,[n(x,{separator:"/"},{default:r((()=>[n(v,null,{default:r((()=>a[5]||(a[5]=[o("i",{class:"el-icon-lx-cascades"},null,-1),i(" 用户列表 ")]))),_:1})])),_:1})]),o("div",b,[o("div",f,[n(y,{modelValue:p.query.openId,"onUpdate:modelValue":a[0]||(a[0]=e=>p.query.openId=e),placeholder:"openId",class:"handle-input mr10"},null,8,["modelValue"]),n(C,{type:"primary",icon:"el-icon-search",onClick:p.handleSearch},{default:r((()=>a[6]||(a[6]=[i("搜索")]))),_:1},8,["onClick"])]),n(_,{data:p.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:r((()=>[n(V,{prop:"openId",label:"openId",align:"center"}),n(V,{prop:"username",label:"用户名"}),n(V,{prop:"sex",label:"性别"}),n(V,{prop:"birthday",label:"出生日期"}),n(V,{prop:"occupation",label:"职业"}),n(V,{prop:"mobile",label:"联系方式"}),n(V,{prop:"interest",label:"兴趣爱好"}),n(V,{prop:"intro",label:"自我介绍"}),n(V,{prop:"address",label:"地址"}),n(V,{prop:"createdAt",label:"注册时间"}),n(V,{label:"操作",width:"180",align:"center"},{default:r((e=>[n(C,{type:"text",icon:"el-icon-edit",disabled:"",onClick:a=>p.handleEdit(e.$index,e.row)},{default:r((()=>a[7]||(a[7]=[i("编辑 ")]))),_:2},1032,["onClick"]),n(C,{type:"text",icon:"el-icon-delete",class:"red",disabled:"",onClick:a=>p.handleDelete(e.$index,e.row)},{default:r((()=>a[8]||(a[8]=[i("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",g,[n(I,{background:"",layout:"total, prev, pager, next","current-page":p.query.pageIndex,"page-size":p.query.pageSize,total:p.pageTotal,onCurrentChange:p.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),n(z,{title:"编辑",modelValue:p.editVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>p.editVisible=e),width:"30%"},{footer:r((()=>[o("span",h,[n(C,{onClick:a[3]||(a[3]=e=>p.editVisible=!1)},{default:r((()=>a[9]||(a[9]=[i("取 消")]))),_:1}),n(C,{type:"primary",onClick:p.saveEdit},{default:r((()=>a[10]||(a[10]=[i("确 定")]))),_:1},8,["onClick"])])])),default:r((()=>[n(w,{"label-width":"70px"},{default:r((()=>[n(k,{label:"用户名"},{default:r((()=>[n(y,{modelValue:p.form.name,"onUpdate:modelValue":a[1]||(a[1]=e=>p.form.name=e)},null,8,["modelValue"])])),_:1}),n(k,{label:"地址"},{default:r((()=>[n(y,{modelValue:p.form.address,"onUpdate:modelValue":a[2]||(a[2]=e=>p.form.address=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}],["__scopeId","data-v-d59dad2a"]]);export{v as default};
