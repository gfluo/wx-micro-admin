import{d as e,B as a,D as l,r as t,o as d,e as i,f as n,g as o,w as r,L as s,E as c,p,j as u,i as b}from"./vendor.b59db1c2.js";import{b as g,c as h}from"./index.5438c2d2.js";import{_ as f}from"./index.0ab5341f.js";const m={name:"userstable",setup(){const t=e(),d=a({address:"",openId:"",pageIndex:1,pageSize:10}),i=l([]),n=l(0),o=l(""),r=()=>{g({limit:d.pageSize,offset:d.pageSize*(d.pageIndex-1)}).then((e=>{i.value=e.data.activityList,n.value=e.data.total}))};r();const p=l(!1);let u=a({name:"",address:""});return{query:d,tableData:i,pageTotal:n,editVisible:p,form:u,qrcode:o,handleAdd:()=>{t.push("/productAdd")},handlePageChange:e=>{d.pageIndex=e,r()},handleDelete:(e,a)=>{s.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{h({activityId:a.id}).then((a=>{0==a.errno?(c.success("删除成功"),i.value.splice(e,1)):c.success("删除失败")}))})).catch((()=>{}))},handleEdit:(e,a)=>{t.push({path:"/productAdd",query:{activityId:a.id}})},handleQrcode:(e,a)=>{p.value=!0,o.value=a.qrcode},saveEdit:()=>{p.value=!1,c.success("修改第 0 行成功"),Object.keys(u).forEach((e=>{i.value[-1][e]=u[e]}))}}}},v={class:"crumbs"},C=(e=>(p("data-v-e86cb4a4"),e=e(),u(),e))((()=>n("i",{class:"el-icon-lx-cascades"},null,-1))),y=b(" 用户列表 "),x={class:"container"},k={class:"handle-box"},_=b("新增活动"),w=b("编辑 "),I=b("复制 "),q=b("二维码 "),V=b("删除"),z={class:"pagination"},E={class:"dialog-footer"},j=b("取 消"),D=b("确 定");var T=f(m,[["render",function(e,a,l,s,c,p){const u=t("el-breadcrumb-item"),b=t("el-breadcrumb"),g=t("el-button"),h=t("el-table-column"),f=t("el-table"),m=t("el-pagination"),T=t("el-image"),A=t("el-dialog");return d(),i("div",null,[n("div",v,[o(b,{separator:"/"},{default:r((()=>[o(u,null,{default:r((()=>[C,y])),_:1})])),_:1})]),n("div",x,[n("div",k,[o(g,{type:"primary",icon:"el-icon-circle-plus-outline",onClick:s.handleAdd},{default:r((()=>[_])),_:1},8,["onClick"])]),o(f,{data:s.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:r((()=>[o(h,{prop:"id",label:"活动id",align:"center"}),o(h,{prop:"title",label:"活动标题"}),o(h,{prop:"amount",label:"活动金额"}),o(h,{"show-overflow-tooltip":"",prop:"describe",label:"活动描述"}),o(h,{prop:"link",label:"活动环节"}),o(h,{prop:"address",label:"地址"}),o(h,{prop:"startTime",label:"活动开始时间"}),o(h,{prop:"startTime",label:"活动结束时间"}),o(h,{label:"操作",width:"180",align:"center"},{default:r((a=>[o(g,{type:"text",icon:"el-icon-edit",onClick:e=>s.handleEdit(a.$index,a.row)},{default:r((()=>[w])),_:2},1032,["onClick"]),o(g,{type:"text",icon:"el-icon-edit",onClick:l=>e.handleCopy(a.$index,a.row)},{default:r((()=>[I])),_:2},1032,["onClick"]),o(g,{type:"text",icon:"el-icon-edit",onClick:e=>s.handleQrcode(a.$index,a.row)},{default:r((()=>[q])),_:2},1032,["onClick"]),o(g,{type:"text",icon:"el-icon-delete",class:"red",onClick:e=>s.handleDelete(a.$index,a.row)},{default:r((()=>[V])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),n("div",z,[o(m,{background:"",layout:"total, prev, pager, next","current-page":s.query.pageIndex,"page-size":s.query.pageSize,total:s.pageTotal,onCurrentChange:s.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),o(A,{title:"编辑",modelValue:s.editVisible,"onUpdate:modelValue":a[1]||(a[1]=e=>s.editVisible=e),width:"30%"},{footer:r((()=>[n("span",E,[o(g,{onClick:a[0]||(a[0]=e=>s.editVisible=!1)},{default:r((()=>[j])),_:1}),o(g,{type:"primary",onClick:s.saveEdit},{default:r((()=>[D])),_:1},8,["onClick"])])])),default:r((()=>[o(T,{src:s.qrcode},null,8,["src"])])),_:1},8,["modelValue"])])}],["__scopeId","data-v-e86cb4a4"]]);export{T as default};
