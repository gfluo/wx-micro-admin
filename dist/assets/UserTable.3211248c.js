import{B as e,D as a,r as l,o as d,e as t,f as o,g as n,w as r,L as s,E as i,p,j as u,i as c}from"./vendor.726ac693.js";import{g as m}from"./index.1b91213e.js";import{_ as b}from"./index.322ced11.js";const f={name:"userstable",setup(){const l=e({address:"",openId:"",pageIndex:1,pageSize:10}),d=a([]),t=a(0),o=()=>{m({limit:l.pageSize,offset:l.pageSize*(l.pageIndex-1),openId:l.openId?l.openId:""}).then((e=>{d.value=e.data.userList,t.value=e.data.total}))};o();const n=a(!1);let r=e({name:"",address:""}),p=-1;return{query:l,tableData:d,pageTotal:t,editVisible:n,form:r,handleSearch:()=>{l.pageIndex=1,o()},handlePageChange:e=>{l.pageIndex=e,o()},handleDelete:e=>{s.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{i.success("删除成功"),d.value.splice(e,1)})).catch((()=>{}))},handleEdit:(e,a)=>{p=e,Object.keys(r).forEach((e=>{r[e]=a[e]})),n.value=!0},saveEdit:()=>{n.value=!1,i.success(`修改第 ${p+1} 行成功`),Object.keys(r).forEach((e=>{d.value[p][e]=r[e]}))}}}},g={class:"crumbs"},h=(e=>(p("data-v-d59dad2a"),e=e(),u(),e))((()=>o("i",{class:"el-icon-lx-cascades"},null,-1))),v=c(" 用户列表 "),x={class:"container"},y={class:"handle-box"},V=c("搜索"),_=c("编辑 "),C=c("删除"),I={class:"pagination"},k={class:"dialog-footer"},w=c("取 消"),E=c("确 定");var j=b(f,[["render",function(e,a,s,i,p,u){const c=l("el-breadcrumb-item"),m=l("el-breadcrumb"),b=l("el-input"),f=l("el-button"),j=l("el-table-column"),z=l("el-table"),S=l("el-pagination"),q=l("el-form-item"),D=l("el-form"),U=l("el-dialog");return d(),t("div",null,[o("div",g,[n(m,{separator:"/"},{default:r((()=>[n(c,null,{default:r((()=>[h,v])),_:1})])),_:1})]),o("div",x,[o("div",y,[n(b,{modelValue:i.query.openId,"onUpdate:modelValue":a[0]||(a[0]=e=>i.query.openId=e),placeholder:"openId",class:"handle-input mr10"},null,8,["modelValue"]),n(f,{type:"primary",icon:"el-icon-search",onClick:i.handleSearch},{default:r((()=>[V])),_:1},8,["onClick"])]),n(z,{data:i.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:r((()=>[n(j,{prop:"openId",label:"openId",align:"center"}),n(j,{prop:"username",label:"用户名"}),n(j,{prop:"sex",label:"性别"}),n(j,{prop:"birthday",label:"出生日期"}),n(j,{prop:"occupation",label:"职业"}),n(j,{prop:"mobile",label:"联系方式"}),n(j,{prop:"interest",label:"兴趣爱好"}),n(j,{prop:"intro",label:"自我介绍"}),n(j,{prop:"address",label:"地址"}),n(j,{prop:"createdAt",label:"注册时间"}),n(j,{label:"操作",width:"180",align:"center"},{default:r((e=>[n(f,{type:"text",icon:"el-icon-edit",disabled:"",onClick:a=>i.handleEdit(e.$index,e.row)},{default:r((()=>[_])),_:2},1032,["onClick"]),n(f,{type:"text",icon:"el-icon-delete",class:"red",disabled:"",onClick:a=>i.handleDelete(e.$index,e.row)},{default:r((()=>[C])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",I,[n(S,{background:"",layout:"total, prev, pager, next","current-page":i.query.pageIndex,"page-size":i.query.pageSize,total:i.pageTotal,onCurrentChange:i.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),n(U,{title:"编辑",modelValue:i.editVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>i.editVisible=e),width:"30%"},{footer:r((()=>[o("span",k,[n(f,{onClick:a[3]||(a[3]=e=>i.editVisible=!1)},{default:r((()=>[w])),_:1}),n(f,{type:"primary",onClick:i.saveEdit},{default:r((()=>[E])),_:1},8,["onClick"])])])),default:r((()=>[n(D,{"label-width":"70px"},{default:r((()=>[n(q,{label:"用户名"},{default:r((()=>[n(b,{modelValue:i.form.name,"onUpdate:modelValue":a[1]||(a[1]=e=>i.form.name=e)},null,8,["modelValue"])])),_:1}),n(q,{label:"地址"},{default:r((()=>[n(b,{modelValue:i.form.address,"onUpdate:modelValue":a[2]||(a[2]=e=>i.form.address=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}],["__scopeId","data-v-d59dad2a"]]);export{j as default};
