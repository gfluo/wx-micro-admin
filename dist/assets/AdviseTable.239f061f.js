import{z as e,B as a,r as l,o as t,e as d,f as n,g as o,w as i,i as s,L as r,C as u}from"./vendor.a6d9e6a0.js";import{b as c}from"./index.7d0f2d56.js";import{_ as p}from"./index.681bbf8e.js";const m={class:"crumbs"},b={class:"container"},f={class:"pagination"},g={class:"dialog-footer"};var h=p({name:"userstable",setup(){const l=e({pageIndex:1,pageSize:10}),t=a([]),d=a(0),n=()=>{c({limit:l.pageSize,offset:l.pageSize*(l.pageIndex-1)}).then((e=>{console.log(e),t.value=e.data.advises,d.value=e.data.total}))};n();const o=a(!1);let i=e({name:"",address:""}),s=-1;return{query:l,tableData:t,pageTotal:d,editVisible:o,form:i,handleSearch:()=>{l.pageIndex=1,n()},handlePageChange:e=>{l.pageIndex=e,n()},handleDelete:e=>{r.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{u.success("删除成功"),t.value.splice(e,1)})).catch((()=>{}))},handleEdit:(e,a)=>{s=e,Object.keys(i).forEach((e=>{i[e]=a[e]})),o.value=!0},saveEdit:()=>{o.value=!1,u.success(`修改第 ${s+1} 行成功`),Object.keys(i).forEach((e=>{t.value[s][e]=i[e]}))}}}},[["render",function(e,a,r,u,c,p){const h=l("el-breadcrumb-item"),v=l("el-breadcrumb"),x=l("el-table-column"),_=l("el-button"),C=l("el-table"),V=l("el-pagination"),y=l("el-input"),k=l("el-form-item"),w=l("el-form"),z=l("el-dialog");return t(),d("div",null,[n("div",m,[o(v,{separator:"/"},{default:i((()=>[o(h,null,{default:i((()=>a[4]||(a[4]=[n("i",{class:"el-icon-lx-cascades"},null,-1),s(" 投诉建议 ")]))),_:1})])),_:1})]),n("div",b,[o(C,{data:u.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:i((()=>[o(x,{prop:"id",label:"id",align:"center"}),o(x,{prop:"username",label:"用户名"}),o(x,{prop:"openId",label:"参加用户"}),o(x,{prop:"content",label:"建议内容"}),o(x,{prop:"createdAt",label:"创建时间"}),o(x,{label:"操作",width:"180",align:"center"},{default:i((e=>[o(_,{type:"text",icon:"el-icon-edit",disabled:"",onClick:a=>u.handleEdit(e.$index,e.row)},{default:i((()=>a[5]||(a[5]=[s("编辑 ")]))),_:2},1032,["onClick"]),o(_,{type:"text",icon:"el-icon-delete",class:"red",disabled:"",onClick:a=>u.handleDelete(e.$index,e.row)},{default:i((()=>a[6]||(a[6]=[s("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),n("div",f,[o(V,{background:"",layout:"total, prev, pager, next","current-page":u.query.pageIndex,"page-size":u.query.pageSize,total:u.pageTotal,onCurrentChange:u.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),o(z,{title:"编辑",modelValue:u.editVisible,"onUpdate:modelValue":a[3]||(a[3]=e=>u.editVisible=e),width:"30%"},{footer:i((()=>[n("span",g,[o(_,{onClick:a[2]||(a[2]=e=>u.editVisible=!1)},{default:i((()=>a[7]||(a[7]=[s("取 消")]))),_:1}),o(_,{type:"primary",onClick:u.saveEdit},{default:i((()=>a[8]||(a[8]=[s("确 定")]))),_:1},8,["onClick"])])])),default:i((()=>[o(w,{"label-width":"70px"},{default:i((()=>[o(k,{label:"用户名"},{default:i((()=>[o(y,{modelValue:u.form.name,"onUpdate:modelValue":a[0]||(a[0]=e=>u.form.name=e)},null,8,["modelValue"])])),_:1}),o(k,{label:"地址"},{default:i((()=>[o(y,{modelValue:u.form.address,"onUpdate:modelValue":a[1]||(a[1]=e=>u.form.address=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}],["__scopeId","data-v-12ceeb70"]]);export{h as default};
