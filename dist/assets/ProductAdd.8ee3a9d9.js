import{k as e,D as l,B as a,b as d,G as t,r as o,o as i,e as n,f as r,g as s,w as u,F as m,l as c,c as f,i as p,t as b,H as g,E as v,p as k,j as V}from"./vendor.b59db1c2.js";import{W as _}from"./wangEditor.11cdd363.js";import{d as y,e as D}from"./index.c355317d.js";import{_ as h}from"./index.af406274.js";const C={name:"productAdd",setup(){const o=e(),i=l(null),n=l(null),r=l(""),s=l(!1),u=a({title:"",address:"",region:"",beginDate:"",endDate:"",amount:0,describe:"",cover:"",link:[]});let m;d((()=>{console.log("获取到的参数：",o.query.activityId),m=new _(i.value),m.config.zIndex=1,m.create(),null!=o.query.activityId&&y({id:o.query.activityId}).then((e=>{u.title=e.data.title,u.address=e.data.address,u.beginDate=e.data.startTime,u.endDate=e.data.endTime,u.amount=e.data.amount/100,u.cover=e.data.cover,u.link=e.data.link.split(","),m.txt.html(e.data.describe)}))})),t((()=>{m.destroy(),m=null}));return{addVaule:r,addVisible:s,showAddLink:()=>{s.value=!0},addLinkConfirm:()=>{u.link.push(r.value),r.value="",s.value=!1},addLinkColse:e=>{u.link.splice(u.link.indexOf(e),1)},editor:i,rules:{title:[{required:!0,message:"请输入活动名称",trigger:"blur"}],address:[{required:!0,message:"请输入活动地址",trigger:"blur"}],beginDate:[{required:!0,message:"请输入开始时间",trigger:"blur"}],endDate:[{required:!0,message:"请输入结束时间",trigger:"blur"}]},formRef:n,form:u,onSubmit:()=>{u.describe=m.txt.html(),n.value.validate((e=>{if(!e)return!1;D({title:u.title,address:u.address,startTime:`${u.beginDate}`,endTime:`${u.endDate}`,describe:u.describe,link:u.link,amount:u.amount,cover:u.cover}).then((e=>{console.log(e)})),v.success("提交成功！")}))},onReset:()=>{n.value.resetFields()}}}},w={class:"crumbs"},x=(e=>(k("data-v-2dd31152"),e=e(),V(),e))((()=>r("i",{class:"el-icon-lx-calendar"},null,-1))),z=p(" 活动 "),q=p("新增"),U={class:"container"},L={class:"form-box"},j=p("+ 新增活动环节"),I={class:"mgb20",ref:"editor"},R=p("保存"),T=p("重置");var A=h(C,[["render",function(e,l,a,d,t,v){const k=o("el-breadcrumb-item"),V=o("el-breadcrumb"),_=o("el-input"),y=o("el-form-item"),D=o("el-input-number"),h=o("el-tag"),C=o("el-button"),A=o("el-date-picker"),E=o("el-col"),F=o("el-form");return i(),n("div",null,[r("div",w,[s(V,{separator:"/"},{default:u((()=>[s(k,null,{default:u((()=>[x,z])),_:1}),s(k,null,{default:u((()=>[q])),_:1})])),_:1})]),r("div",U,[r("div",L,[s(F,{ref:"formRef",rules:d.rules,model:d.form,"label-width":"80px"},{default:u((()=>[s(y,{label:"活动名称",prop:"title"},{default:u((()=>[s(_,{size:"mini",modelValue:d.form.title,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.title=e)},null,8,["modelValue"])])),_:1}),s(y,{label:"活动地址",prop:"address"},{default:u((()=>[s(_,{size:"mini",modelValue:d.form.address,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.address=e)},null,8,["modelValue"])])),_:1}),s(y,{label:"活动封面",prop:"cover"},{default:u((()=>[s(_,{size:"mini",modelValue:d.form.cover,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.cover=e),placeholder:"请输入封面图片网络地址"},null,8,["modelValue"])])),_:1}),s(y,{label:"费用(元)",prop:"amount"},{default:u((()=>[s(D,{size:"mini",modelValue:d.form.amount,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.amount=e),min:1},null,8,["modelValue"])])),_:1}),s(y,{label:"活动环节",prop:"link"},{default:u((()=>[(i(!0),n(m,null,c(d.form.link,(e=>(i(),f(h,{key:e,closable:"","disable-transitions":!1,onClose:l=>d.addLinkColse(e)},{default:u((()=>[p(b(e),1)])),_:2},1032,["onClose"])))),128)),d.addVisible?(i(),f(_,{key:0,modelValue:d.addVaule,"onUpdate:modelValue":l[4]||(l[4]=e=>d.addVaule=e),class:"input-new-tag",size:"mini",onKeyup:g(d.addLinkConfirm,["enter"])},null,8,["modelValue","onKeyup"])):(i(),f(C,{key:1,class:"button-new-tag",size:"small",onClick:d.showAddLink},{default:u((()=>[j])),_:1},8,["onClick"]))])),_:1}),s(y,{label:"开始时间"},{default:u((()=>[s(E,{span:11},{default:u((()=>[s(y,{prop:"beginDate"},{default:u((()=>[s(A,{size:"mini",type:"datetime",placeholder:"选择日期",modelValue:d.form.beginDate,"onUpdate:modelValue":l[5]||(l[5]=e=>d.form.beginDate=e),style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),s(y,{label:"结束时间"},{default:u((()=>[s(E,{span:11},{default:u((()=>[s(y,{prop:"endDate"},{default:u((()=>[s(A,{size:"mini",type:"datetime",placeholder:"选择日期",modelValue:d.form.endDate,"onUpdate:modelValue":l[6]||(l[6]=e=>d.form.endDate=e),style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),s(y,{label:"活动描述"},{default:u((()=>[r("div",I,null,512)])),_:1}),s(y,null,{default:u((()=>[s(C,{type:"primary",onClick:d.onSubmit},{default:u((()=>[R])),_:1},8,["onClick"]),s(C,{onClick:d.onReset},{default:u((()=>[T])),_:1},8,["onClick"])])),_:1})])),_:1},8,["rules","model"])])])])}],["__scopeId","data-v-2dd31152"]]);export{A as default};
